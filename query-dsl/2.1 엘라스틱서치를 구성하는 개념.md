# 엘라스틱서치를 구성하는 개념

## 기본 용어
### 엘라스틱서치의 데이터는 인덱스, 타입, 문서, 필드 구조로 구성된다.
- 인덱스 (Index)
    - 데이터 저장 공간
    - 하나의 인덱스는 하나의 타입만 가지며 하나의 물리적인 노드에 여러 개의 논리적인 인덱스를 생성할 수 있다.
    - 검색 시 인덱스 이름으로 문서 데이터를 검색하며, 여러 개의 인덱스를 동시에 검색하는 것도 가능하다.
    - 분산 환경으로 구성하면 하나의 인덱스가 여러 노드에 분산 저장되어 관리되며 분산 처리에 다른 여러 이점을 누릴 수 있다.
    - 인덱스 생성 시 기본적으로 5개의 프라이머리(Primary) 샤드와 1개의 레플리카(Replica) 샤드 세트를 생성하며 각각의 샤드 수는 인덱스를 생성할 때 옵션을 이용해 변경할 수 있다.
    - 인덱스의 이름은 모두 소문자여야 한다.
    - 추가, 수정, 삭제, 검색은 RESTful API로 수행할 수 있다.
    - 인덱스가 없는 상태에서 데이터가 추가된다면 데이터를 이용해 인덱스가 자동으로 생성된다.
- 샤드 (Shard)
    - 색인된 문서는 하나의 인덱스에 담기고, 인덱스 내부에 색인된 데이터는 물리적인 공간에 여러 개의 파티션으로 나뉘어 구성되는데, 이 파티션을 샤드라고 부른다.
    - 엘라스틱서치는 다수의 샤드로 문서를 분산 저장하고 있어 데이터 손실 위험을 최소화할 수 있다.
- 타입 (Type)
    - 인덱스의 논리적 구조를 의미하며, 인덱스 속성에 따라 분류하기도 한다.
    - 엘라스틱서치 6.0 버전 이하에서는 하나의 인덱스에 여러 타입을 설정 가능했지만 6.1 버전부터는 인덱스당 하나의 타입만 사용할 수 있다.
- 문서 (Document)
    - 엘라스틱서치에서 데이터가 저장되는 최소 단위
    - 기본적으로 JSON 포맷으로 데이터가 저장된다.
    - 하나의 문서는 다수의 필드로 구성돼 있는데 각 필드는 데이터의 형태에 따라 용도에 맞는 데이터 타입(Data Type)을 정의해야 한다.
    - 중첩 구조를 지원하기 때문에 이를 이용해 문서 안에 문서를 지정하는 것도 가능하다.
- 필드 (Field)
    - 문서를 구성하기 위한 속성
    - 하나의 필드는 목적에 따라 다수의 데이터 타입을 가질 수 있다. (매칭 검색을 하거나 초성을 이용한 검색이 모두 지원되도록 keyword, text 타입 생성)
- 매핑 (Mapping)
    - 문서의 필드와 필드의 속성을 정의하고 그에 따른 색인 방법을 정의하는 프로세스
    - 여러 가지 데이터 타입을 지정할 수 있지만 필드명은 중복해서 사용할 수 없다.