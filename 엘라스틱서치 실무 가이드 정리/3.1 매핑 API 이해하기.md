# 매핑 API 이해하기

## 매핑
- 색인 시 데이터가 어디에 어떻게 저장될지를 결정하는 설정
- 데이터베이스의 스키마에 대응하는 개념
- 인덱스에 추가되는 각 데이터 타입을 구체적으로 정의하는 일

## 엘라스틱서치 데이터 타입 정의의 중요성
- 엘라스틱서치는 기본적으로 스키마리스이기 때문에 명시적으로 필드를 정의하지 않아도 데이터 유형에 따라 필드 데이터 타입에 대한 매핑 정보가 자동으로 생성된다.
- 자동 매핑 방식은 편리해 보이지만 실수로 잘못된 타입이 지정될 경우 수정할 방법이 없기 때문에 주의해야 한다.
- 동적 매핑을 하면 문서에 새로운 필드가 추가될 때마다 인덱스가 자동으로 업데이트되기 때문에 매우 쉽고 편리하지만 한번 정의된 필드에 서로 다른 타입의 데이터가 입력된다면 뒤에 입력된 데이터의 색인 생성이 실패한다.
    - 최초 색인 시 문자가 들어왔다면 나중에 문자나 숫자 모두 색인이 가능할 것이다. 하지만 맨 처음 색인할 때 숫자가 들어왔다면 해당 필드는 숫자 타입으로 매핑될 것이고 나중에 문자가 들어올 경우 색인에 실패할 것이다.
    - 생성된 매핑의 타입은 변경할 수 없다. 타입을 변경하려면 인덱스를 삭제한 후 다시 생성하거나 매핑을 다시 정의해야 한다.

## 매핑 정보를 설정할 때 고려사항
- 문자열을 분석할 것인가?
- _source에 어떤 필드를 정의할 것인가?
- 날짜 필드를 가지는 필드는 무엇인가?
- 매핑에 정의되지 않고 유입되는 필드는 어떻게 처리할 것인가?

## 매핑 인덱스 만들기

